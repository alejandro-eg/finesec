<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="https://www.thymeleaf.org">
<head>
<title>Finesec | Login</title>
<link rel="icon" th:href="@{/themes_AdminLTE/dist/img/logofinesec.png}"
	type="image/png">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
</head>
<body class="bg-light">

	<section class="vh-100" style="background-color: #8300e9;">
		<div class="container py-5 h-100">
			<div
				class="row d-flex justify-content-center align-items-center h-100">
				<div class="col-12 col-md-8 col-lg-6 col-xl-5">
					<div class="card shadow-2-strong" style="border-radius: 1rem;">
						<div class="card-body p-5 text-center">

							<h3 class="mb-5">Iniciar Sesión</h3>
							<div th:if="${param.error}" class="alert alert-danger">Email
								o contraseña incorrectos.</div>

							<div th:if="${param.logout}" class="alert alert-info">Has
								finalizado sesión.</div>
							<div th:if="${alerta2}" class="alert alert-danger" role="alert">
								<strong th:text="${alerta2}"></strong>
							</div>
							<div th:if="${alerta3}" class="alert alert-success" role="alert">
								<strong th:text="${alerta3}"></strong>
							</div>
							<form th:action="@{/login}" method="post">

								<div class="form-group mb-4">
									<input type="email" id="email"
										class="form-control form-control" placeholder="Email"
										name="username" />
								</div>
								<div class="form-group mb-4">
									<input type="password" id="password"
										class="form-control form-control" name="password"
										placeholder="Contraseña" />
								</div>

								<button class="btn btn-primary btn-lg btn-block" type="submit">Iniciar
									Sesión</button>

							</form>
							<br>
							<div class="text-start">
								<p class="mb-1">
									<a id="forgotPasswordBtn" href="#">Olvidé mi contraseña</a>
								</p>
							</div>

							<hr class="my-4">

						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<script>
		document
				.getElementById('forgotPasswordBtn')
				.addEventListener(
						'click',
						function(event) {
							event.preventDefault(); // Prevenir el comportamiento predeterminado del enlace

							var emailInput = document.getElementById('email').value;

							if (emailInput && validateEmail(emailInput)) {
								// Si el correo electrónico es válido, redirigir a la página de cambio de contraseña
								window.location.href = "/olvide-contrasenia?email="
										+ encodeURIComponent(emailInput);
							} else {
								// Si el correo electrónico no es válido, mostrar un mensaje de alerta
								alert("Por favor, ingrese un correo electrónico válido.");
							}
						});

		function validateEmail(email) {
			var re = /\S+@\S+\.\S+/;
			return re.test(email);
		}
	</script>
</body>
</html>
